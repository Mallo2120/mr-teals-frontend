<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mr. Teals</title>
  <link rel="stylesheet" href="./style.css" />
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">Mr. Teals</div>
    <div class="controls">
      <button id="btnStart" class="btn">Start</button>
      <button id="btnPause" class="btn">Pause</button>
      <button id="btnKill" class="btn">Kill</button>
      <button id="btnReset" class="btn btn-ghost" title="Clear all positions and logs without starting">Reset</button>
      <button id="themeToggle" class="btn btn-ghost">Light</button>
    </div>
  </header>

  <main class="grid">
    <section class="card stat" title="Closed P&L for today">
      <div class="stat-label">Realized PnL</div>
      <div id="realizedPL" class="stat-value">$0.00</div>
      <div id="realizedPLSub" class="muted">Loss</div>
    </section>

    <section class="card stat" title="Open P&L on current positions">
      <div class="stat-label">Unrealized PnL</div>
      <div id="unrealizedPL" class="stat-value">$0.00</div>
      <div id="unrealizedPLSub" class="muted">Loss</div>
    </section>

    <section class="card stat" title="Number of trades executed today">
      <div class="stat-label">Trades Today</div>
      <div id="tradesToday" class="stat-value">0</div>
      <div id="tradesTodaySub" class="muted">Quiet so far</div>
    </section>

    <section class="card span2" title="Equity = cash + positions value">
      <div class="section-title">Equity Snapshot</div>
      <div id="snapEquity" class="big">$10,000.00</div>
      <div class="muted">Cash: <span id="snapCash">$10,000.00</span></div>
      <div class="muted">Positions: <span id="snapPositions">$0.00</span></div>
    </section>

    <section class="card span2">
      <div class="section-title">Account Equity</div>
      <div class="range-chips">
        <button class="chip active" data-range="1D">1D</button>
        <button class="chip" data-range="1W">1W</button>
        <button class="chip" data-range="1M">1M</button>
        <button class="chip" data-range="3M">3M</button>
        <button class="chip" data-range="YTD">YTD</button>
        <button class="chip" data-range="1Y">1Y</button>
        <button class="chip" data-range="5Y">5Y</button>
        <button class="chip" data-range="ALL">All</button>
      </div>
      <div class="chart-wrap">
        <canvas id="equityChart" height="160"></canvas>
        <div id="equityEmpty" class="empty" hidden>No performance data yet</div>
      </div>
    </section>

    <section class="card">
      <div class="section-title">Trading Settings</div>
      <form id="settingsForm">
        <label title="Starting balance for simulation">
          Initial Balance ($)
          <input id="initialBalance" type="number" min="0" step="100" value="10000" />
        </label>
        <label title="Each trade uses this % of current equity">
          Position Size (% of equity)
          <input id="positionSizePct" type="number" min="0" max="100" step="1" value="10" />
        </label>
        <label title="Stop loss % from entry price">
          Stop Loss (%)
          <input id="stopLossPct" type="number" min="0" max="100" step="0.5" value="2" />
        </label>
        <label title="Max daily loss before auto-pause">
          Max Daily Loss (%)
          <input id="maxDailyLossPct" type="number" min="0" max="100" step="0.5" value="5" />
        </label>
        <label title="Strategy for automation">
          Strategy
          <select id="strategy">
            <option value="momentum" selected>Momentum</option>
            <option value="rsi">RSI</option>
          </select>
        </label>
        <button class="btn" type="submit">Save Settings</button>
      </form>
    </section>

    <section class="card span2">
      <div class="section-title">Watchlist</div>
      <ul id="watchlist" class="watchlist" role="listbox" aria-label="Watchlist"></ul>
      <div class="watchlist-add">
        <input id="addSymbolInput" placeholder="Add Symbol (e.g. BTC/USD)" />
        <button id="addSymbolBtn" class="btn">Add</button>
      </div>
    </section>

    <section class="card span2">
      <div class="section-title">Manual Trade</div>
      <form id="manualTradeForm" class="trade-form">
        <label>
          Symbol
          <input id="manualSymbol" list="symbolsList" placeholder="BTC/USD" />
          <datalist id="symbolsList"></datalist>
        </label>
        <label>
          Side
          <select id="manualSide">
            <option value="BUY">BUY</option>
            <option value="SELL">SELL</option>
          </select>
        </label>
        <label title="Quantity of the base asset (e.g., 0.01 BTC)">
          Quantity
          <input id="manualQty" type="number" step="0.0001" min="0.00000001" placeholder="0.01" />
        </label>
        <button class="btn" type="submit">Execute</button>
      </form>
    </section>

    <section class="card span2">
      <div class="section-title">Trade Log</div>
      <div class="table-wrap">
        <table class="table">
          <thead>
            <tr>
              <th>Time</th><th>Symbol</th><th>Side</th><th>Qty</th><th>Price</th><th>Cost</th>
            </tr>
          </thead>
          <tbody id="tradeLogBody"></tbody>
        </table>
      </div>
    </section>
  </main>

  <div id="toastContainer" class="toasts"></div>
  <script src="./app.js"></script>
</body>
</html>
